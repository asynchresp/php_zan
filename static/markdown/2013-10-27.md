<!---title:浅淡贝叶斯之过滤垃圾邮件-->
<!---keywords:奋斗史,青春,三年奋斗,五年奋斗-->

这两天不经意间，到了几个很有魅力的博客去洗礼了一番，发现自己写的博客实在是不敢恭维，就像小学生记流水帐。好的博客至少应该是这样的：1.带给读者对一个事件新的的看法；2.给读者一种奋发起上，或幽默搞笑；3.像一位睿智的老者跟你讲他一生的传奇；4...我希望我的博客能慢慢做到，有心的读者请提宝贵建议。

贝叶斯分类的问题，简单的来说就是后验概率。说后验概率就得说下先验概率，一个盒子里面有N个白球，M个黑球，随手抓出一个球，这球是白球的概率就是先验概率。而后验概率就是反过来，一个盒子里面有球，但我不知道里面球颜色的比例，每次抓出一个球，记下球的颜色，求得盒子里面球颜色的比例，这就是后验概率。

贝叶斯分类算法已经广泛应用于机器学习，包括各种识别（语音，图像，聚类，翻译，分词等）。我想用过滤垃圾邮件来简单说下贝叶斯的原理。

能让程序明白什么样的邮件是垃圾邮件，是一件很不容易的事情，试想，你是怎么判断一封邮件是正常邮件还是垃圾邮件呢？当我们收到一封邮件的时候，首先看到来自谁，这是第一步，如果地址是你记忆中一个专门发垃圾广告通知的地址，类似 reminder@sendmail.dangdang.com 这样的，直接就可以判断为垃圾邮件。若地址陌生或者记不清，接着一般就是看标题和内容，要是包含什么世纪佳缘，或者火星文什么的，然后就可以判断是垃圾邮件了。

然后我们来模拟大脑判断的过程，首先，在邮件中把垃圾邮件和正常邮件归类，这个就相当于我们记忆。假设邮件里面有1000封邮件，垃圾邮件是600封。也就是说，教育教师教出来的都能算出来，垃圾邮件的比例是60%，正常邮件的比例是40%。有了这个库，就可以对垃圾邮件和正常邮件里面的词进行统计，假设取“幸福”这个词进行统计。正常邮件出现“幸福”有100封，垃圾邮件里面出现“幸福”的邮件有300封，这个统计数字看来，我经常看不正经网站啊，什么早泄，阳萎邮件很多啊，而事实上不上啊。

下面开始算“幸福”度了，定义S为Spam垃圾邮件，H为Healthy正常邮件，w1为带“幸福”的邮件，那么该邮件是垃圾邮件的情况下，内容包含“幸福”的概率是
![概率计算公式](/static/images/upload/20140413215811.jpg)

剩下的就是全概率公式了，把P(w1)替换后为：

![全概率公式](/static/images/upload/20140413215811.jpg)

很容易可以算出w1为“幸福”情况，该邮件为垃圾邮件的概率

![含“幸福”邮件为垃圾邮件的概率计算公式](/static/images/upload/20140413215812.png)

看到这，观众朋友一定立刻领悟到，要是根据这个训练数据库得到的结果来看，下一封含“幸福”的邮件，就会被标志为垃圾邮件。

“幸福”是一个关键词，作为w1的它，必然会有w2，w3。。每一个都是一个独立的事件，当一个“幸福”无法准确的判断时，他们的概率和就是一个可以作为判断的标准了。

假设w2为含“程序员”，垃圾邮件中含“程序员”的有20封，正常邮件为200封，计算P(S|w2)

![含“程序员”邮件为正常邮件计算公式](/static/images/upload/20140413215812.png)

最终计算包含“幸福”，“程序员”属于垃圾邮件的概率P

![含“幸福”，“程序员”为垃圾邮件计算公式](/static/images/upload/20140413215813.jpg)

这样一算，这邮件就不能为垃圾邮件了。这样的说明够清楚了吧

![判断新邮件是否为垃圾邮件](/static/images/upload/20140413215813.png)

下一篇介绍下[贝叶斯相关的拼写纠正](http://www.huamanshu.com/blog/2013-11-02.html)。





