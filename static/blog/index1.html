<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />

<link rel="stylesheet" href="/static/css/bootstrap.css" type="text/css"/>
<link rel="stylesheet" href="/static/css/blog.css" type="text/css"/>

<script type="text/javascript">
var _speedMark = new Date();
</script>
</head>

<body>
<div class="navbar navbar-fixed-top">
  <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
        <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav ml90">
          <li data-slide="1" class="col-xs-4"><a href="/"  id="menu-link-1"><span class="glyphicon glyphicon-home"></span>首页</a></li>
          <li data-slide="2" class="col-xs-4 active"><a href="/blog/" id="menu-link-2"><span class="glyphicon glyphicon-book"></span>博客</a></li>
          <li data-slide="3" class="col-xs-4"><a href="/team/" id="menu-link-3" target="_blank"><span class="glyphicon glyphicon-user"></span>团队</a></li>
        </ul>
      <div class="row">
        <div class="col-xs-4 active-menu"></div>
      </div>
          
      </div>
    </div>
</div>


<div class="content">
	<p>......</p>
<p><br></p>
<h2 id="我对你男朋友没兴趣"><a href="/blog/2014-06-06.html">我对你男朋友没兴趣</a></h2>
<hr />
<p>2014-06-06</p>
<p>偶遇一个很漂亮的妹子，鼓起二十几年的勇气跟她搭讪。</p>
<p><strong>我：</strong>姑娘，你电话多少？</p>
<p><strong>妹子：</strong>对不起，我有男朋友。。。</p>
<p><strong>我：</strong>对不起，我对你男朋友没兴趣 ......</p>
<p><br></p>
<h2 id="从ip查询开始"><a href="/blog/2014-05-251.html">从ip查询开始</a></h2>
<hr />
<p>2014-05-251</p>
<p>这些天看着一个很老的<a href="http://lumaqq.linuxsir.org/article/qqwry_format_detail.html">文档</a>，文档更新的时候是05年，年代的久远让人难以置信，我也不知道这文档所描述的qqwry.dat原理，在最新版是否还适用。事实证明：一个好的设计，经受三五年的考验是没有问题的。</p>
<p>文档已经写得这么好了，多看几遍就自然明白了，关键是理解0x01与0x02模式的区别。写了PHP和python版本来验证，前人的智慧，果然很厉害！</p>
<p>很多企业都会使用ip2city这服务，简单来说就是从web server的REMOTE_ADDR拿到客户端ip之后，定位这ip是哪个城市，做更贴心的服务。一般的做法是由一个接口来查询ip对应的城市信息，接口可能是由c或者java来封装，也可能是python、php。考虑解决方案的关键不应该只看语言的速度，一个ip转换过程所花的时间相比网络请求和可维护性的代码，显得无足轻重。为解决跨主</p>
<p>writing.........</p>
<p><br></p>
<h2 id="蛙泳小王子0.5分落后冠军"><a href="/blog/2014-05-25.html">蛙泳小王子0.5分落后冠军</a></h2>
<hr />
<p>2014-05-25</p>
<p>据新华社最新报道，昨日蛙泳小王子在百度男子100米蛙泳比赛中仅以0.5分落后冠军惜败，有专家分析指出，这是蛙泳小王子首次在蛙泳比赛中失误惜败，当然，这也是蛙泳小王子第一次参加比赛。落后的原因有以下几个：</p>
<ul>
<li>蛙泳小王子腿上有腿毛，加大了与水的黏性系数，液体阻力为常人的两倍，应该穿上“鲨鱼皮”</li>
<li>蛙泳小王子提前两天下水试游时，试水时间长达两个小时，导致肌肉酸疼抽筋，比赛时带伤上阵</li>
<li>蛙泳小王子试水期间误以为泳池长度为50米，练习时，只管一个回来；事实上泳池长度只有25米，导致蛙泳王子开始比赛的时候，一个回来的时候就傻X了......</li>
</ul>
<p><br></p>
<h2 id="悬崖边上的浆果"><a href="/blog/2014-05-20.html">悬崖边上的浆果</a></h2>
<hr />
<p>2014-05-20</p>
<p>有人野行遇虎，一路奔逃，被追赶到悬崖上。他攀着藤条欲下，发现崖下另有一只虎在等着。他悬空吊在崖间，上下两难。却又有两只老鼠，爬过来啃咬他攀附的藤枝，藤条很快就会断绝。他认命待死，反而平静下来。忽然发现崖壁上有一枚鲜红的浆果，先前紧张，一直没注意到，这时便摘来送进嘴里，一嚼之下，忍不住大声赞叹：“好甜啊！”</p>
<p>当我再次听到这故事的时候，突然好喜欢这故事，这是被李普利编选的《禅的故事》收录一则出自佛典的寓言。收了看过这故事的人，不只是我一个，只因当时修为不足以理解这故事的深刻寓意。最开始会为这遇虎之人的潇洒而敬佩，后来了解写这寓言的最初想表达的含义时，确实被他的构思震撼了。</p>
<p>从我们诞生的那一刻开始，苦难，就像饥饿的老虎一直追赶着我们；死亡，就像一头凶猛的狮子，一直在悬崖的尽头等待；而白天和黑夜的交替，就像一黑一白两只老鼠，不停地撕咬着我们暂时栖身的生活之树。</p>
<p>......</p>
<p><br></p>
<h2 id="靠"><a href="/blog/2014-05-18.html">靠</a></h2>
<hr />
<p>2014-05-18</p>
<p><strong>起源</strong></p>
<p>写时复制英文名字叫“copy-on-write”，简称“cow”，又名“靠”</p>
<p>今天查了下这个&quot;cow&quot;，原来起源于*nix内存管理机制，后来广泛应用在其它开发语言上，C++的STL，还有PHP，相信很多人都了解这个写时复制，经常跟别人侃得甚欢。</p>
<pre><code>$foo = &#39;foo&#39;;</code></pre>
<p>......</p>
<p><br></p>
<h2 id="从概念到平民的经济"><a href="/blog/2014-05-12.html">从概念到平民的经济</a></h2>
<hr />
<p>2014-05-12</p>
<blockquote>
<p>之所以盛行炒作概念之风，不是因为今天概念太多了，恰恰是因为现如今人们缺乏对概念的理解。</p>
<p><a href="http://www.csdn.net/article/2014-05-09/2819698-Innovation">《技术人的创新修炼：以系统的方法理解创新思维》</a></p>
</blockquote>
<p>在看这篇技术文章的时候，想了下，好像事实真的确实如此。</p>
<p>第一个想到跟概念有关的东西就是概念机、概念车，刨去商业广告的入侵，生活中类似长大，成熟，幸福这些概念都是太笼统了。看到知乎上面有个同学说<a href="http://www.zhihu.com/question/21295246#answer-2873113">成熟</a>，很认真到位，有兴趣直接过去围观吴遇安的回答吧。......</p>
<p><br></p>
<h2 id="php扩展htable"><a href="/blog/2014-05-06.html">php扩展：htable</a></h2>
<hr />
<p>2014-05-06</p>
<p>此htbale非彼htable，这只是php扩展，用来快速获取分表的后缀。一般情况下，我们数据都可以在mysql下存储在一个表中，慢慢地，用户量上来了，数据量大了就得分表。分表策略各有想法，大多以某一字段做hash，之后做模运算，所得到的数字就是表后缀。</p>
<p>简单的一个例子：你有5000万用户，打算分10个表，把uid值hash（一般使用crc32），得到一个整数值，再模10，得到的数字即为表后缀。</p>
<pre><code>function getHashTableId($uid, $s=10) {
    $crcH = sprintf(&quot;%u&quot;, crc32($uid));
    $retHash = intval(fmod($crcH, $s)) + 1;</code></pre>
<p>......</p>
<p><br></p>
<h2 id="你没能成就奇迹的七个原因"><a href="/blog/2014-04-27.html">你没能成就奇迹的七个原因</a></h2>
<hr />
<p>2014-04-27</p>
<p>发现一些很好的文章，在此分享，这次是来自一篇国外的文章<a href="https://medium.com/life-learning/2a1841f1335d">《7 Reasons Why You Will Never Do Anything Amazing With Your Life》</a>，个人阅读完之后，很有感触，便翻译过来，中文为《你没能成就奇迹的七个原因》，致我亲爱的她，给树立一个好榜样。有兴趣的同学一定要慢速阅读，因为一篇好的文章值得你停下脚步让灵魂来休息，来调整姿态。</p>
<hr />
<p><strong>没错，听我说，说的就是你</strong></p>
<p>......</p>
<p><br></p>
<h2 id="不如我们也来写php扩展"><a href="/blog/2014-04-23.html">不如，我们也来写php扩展？</a></h2>
<hr />
<p>2014-04-23</p>
<p>今天先写个开发php插件的入门介绍，看完演示之后还有兴趣的童鞋再等下一篇进阶。会发现入门的东西很有意思，至少让有代码之“痒”的童鞋解恨（就是范指一些急切俸hello world的demo的童鞋），其实，更应该追求一个“www”学习过程，也就是“what”，“why”，“how”。</p>
<div class="figure">
<img src="/static/images/upload/20140602120759-54.png" alt="怎样快速学习一门新技术" /><p class="caption">怎样快速学习一门新技术</p>
</div>
<p>今天先不讲过多的概念，大概的过程是这样的，要在一个已安装好的php环境里面添加一个自定义的php扩展。</p>
<p><img src="/static/images/upload/20140424154822-27.png" alt="开发流程" /> ......</p>
<p><br></p>
<h2 id="选择markdown的理由"><a href="/blog/2014-04-14.html">选择markdown的理由</a></h2>
<hr />
<p>2014-04-14</p>
<p>想写这篇介绍文章的原因，在于我想尝试一些事情，类似科普。前天晚上看《当彩色的声音尝起来是甜的》前几篇，给我最大的感受就是做技术的同时，也需要人文。后面我会专门写一篇书评，貌似是本还不错的书。</p>
<p>markdown是一个很流行的写作语言。啊？语言？不要，不想学！坚决不学，我要睡觉！那天我跟媳妇说，要不你用我的博客后台来写博客吧，markdown写得很清爽的时候，她是这样回我的。</p>
<p>如果你不了解md的话，那我这样来跟你说吧。很久很久以前，一只猫遇到了一只鹰，于是他们相爱了，便有了猫头鹰。跟你说这话不是开玩笑，只是想告诉你一个事实，你要把一个新的东西当作你新女友，尝试去深入她，才能感觉到美好，甚至是不能自拔。</p>
<p>md就是这样的一个小清新，她想法很简单，请允许我用十分钟给你介绍她的简单大方美。</p>
</div>

<hr class="blog-hr">

<div class="container blog-container prev-next-box">
  <ul class="pager">
    <li class="previous"><a href="javascript:void(0);" id="prev">&larr; Older</a></li>
    <li class="next"><a href="javascript:void(0);" id="next">Newer &rarr;</a></li>
  </ul>
</div>

<div class="content" data-slide="1">
	<div class="blog-container">
		<div id="home-row-1" class="clearfix">
			<div id="comments"></div>
		</div>
	</div>
</div>

<div class="container blog-container comment-box">
		<form class="form-horizontal" role="form">
	  <div class="form-group">
	    <div class="col-sm-3">
	      <input type="text" class="form-control js-name" placeholder="名字不重要">
	    </div>
	  </div>
	  <div class="form-group">
	    <div class="col-sm-10">
	      <textarea class="form-control inputComment js-comment" placeholder="深有感触，写点我的想法"> </textarea>
	    </div>
	  </div>
	  <div class="form-group">
	    <div class="col-sm-10">
	      <button type="submit" class="btn btn-default js-submit">发表评论</button>
	    </div>
	  </div>
	</form>
</div>
<!-- <div id="blog-footer"><a href="http://e.weibo.com/csdnsupport/profile" target="_blank" class="weibo">微博</a> | <a href="http://e.weibo.com/csdnsupport/profile" target="_blank" class="glyphicon glyphicon-envelope email-footer">wushuiyong@huamanshu.com</a> </div> -->
<div id="blog-footer">©2014 huamanshu. All rights reserved</div><div class="hide" style="display:none"><script type="text/javascript" src="http://hm.baidu.com/h.js?fb1a70589b6397ff055728e0196175d5"></script></div>
<script src="/static/js/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="/static/js/jquery.easing.1.3.js" type="text/javascript"></script>
<script src="/static/js/script.js" type="text/javascript"></script>
<script>
$(document).ready(function(e) {
  var lis = $('.nav > li');
  menu_focus( lis[1], 1 );
  
  var sprintf = function() {
      var arg = arguments,
          str = arg[0] || '',
          i, n;
      for (i = 1, n = arg.length; i < n; i++) {
          str = str.replace(/%s/, arg[i]);
      }
      return str;
  }

  // 初始化评论
  var initComment = function() {
    $.ajax({
      'type' : 'GET',
      'url'  : '/home/blog/getComment/',
      'data' : 'id=' + encodeURIComponent(window.location.href),
      'success' : function(data) {
          var tpl = '';
          for (key in data.comments) {
              var c = data.comments[key];
              tpl += sprintf("<blockquote><p><em>%s</em>%s</p></blockquote>", c.name, c.comment);
          }
          $('#comments').html(tpl).show();
      }
    })
  }
  initComment();

  // 初始化浏览次数
  var initViewCount = function() {
    $.ajax({
      'type' : 'GET',
      'url'  : '/home/blog/viewCount/',
      'data' : 'id=' + encodeURIComponent(window.location.href),
      'success' : function(data) {
          $('.time').text(data.time);
          $('.view').text(data.view);
      }
    });
  }
  initViewCount();

  // 获取上一篇下一篇
  var initNextPrev = function() {
    $.ajax({
      'type' : 'GET',
      'url'  : '/home/blog/getNextPrev/',
      'data' : 'id=' + encodeURIComponent(window.location.href),
      'success' : function(data) {
        var re = /\/index\d.html/
        var nTitle = re.test(data.n.url) ? '下一页' : data.n.title;
        var pTitle = re.test(data.p.url) ? '上一页' : data.p.title;
        data.n ? $('#next').attr('href', data.n.url).html(nTitle + ' &rarr;') : $('#next').hide();
        data.p ? $('#prev').attr('href', data.p.url).html('&larr; ' + pTitle) : $('#prev').hide();
      }
    });
  }
  initNextPrev();

  // 写完点提交或者ctrl+enter
  if (event.ctrlKey && event.keyCode == '13') {
    addComment();
  }
  $('.js-submit').click(function(e) {
    e.preventDefault();
    addComment();
  })

  // 添加评论
  var addComment = function() {
    var name = $('.js-name').val();
    var comment = $('.js-comment').val();

    $.ajax({
      'type' : 'POST',
      'url'  : '/home/blog/addComment/',
      'data' : sprintf('name=%s&comment=%s&id=%s', encodeURIComponent(name), encodeURIComponent(comment), encodeURIComponent(window.location.href)),
      'success' : function(data) {
          initComment();
          $('.js-name').val('');
          $('.js-comment').val('');
      }
    })
  }
});

</script>
<script type="text/javascript" src="http://hm.baidu.com/h.js?fb1a70589b6397ff055728e0196175d5"></script>

</body>
</html>
